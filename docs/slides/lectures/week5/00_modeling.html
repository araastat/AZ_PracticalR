<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Practical R</title>
    <meta charset="utf-8" />
    <meta name="author" content="Abhijit Dasgupta" />
    <script src="00_modeling_files/header-attrs-2.6/header-attrs.js"></script>
    <link href="00_modeling_files/tachyons-4.12.0/tachyons.min.css" rel="stylesheet" />
    <link href="00_modeling_files/panelset-0.2.3.9000/panelset.css" rel="stylesheet" />
    <script src="00_modeling_files/panelset-0.2.3.9000/panelset.js"></script>
    <link href="00_modeling_files/xaringanExtra-extra-styles-0.2.3.9000/xaringanExtra-extra-styles.css" rel="stylesheet" />
    <script src="00_modeling_files/kePrint-0.0.1/kePrint.js"></script>
    <link href="00_modeling_files/lightable-0.0.1/lightable.css" rel="stylesheet" />
    <link rel="stylesheet" href="../css/xaringan-themer.css" type="text/css" />
    <link rel="stylesheet" href="../css/custom.css" type="text/css" />
    <link rel="stylesheet" href="../css/sfah.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Practical R
### Abhijit Dasgupta
### 22 February, 2021

---














---
class: middle, center

# Statistical models

---
class: inverse, middle, center


.bigblockquote[All models are wrong, but some are useful]

.right[G.E.P. Box]

---

# Models

Models are our way of understanding nature, usually using some sort of mathematical expression

Famous mathematical models include Newton's second law of motion, the laws of thermodynamics, the ideal gas law

All probability distributions, like Gaussian, Binomial, Poisson, Gamma, are models

Mendel's laws are models **that result in** particular mathematical models for inheritance and population prevalence

---

# Models

We use models all the time to describe our understanding of different processes

+ Cause-and-effect relationships
--

+ Supply-demand curves
--

+ Financial planning
--

+ Optimizing travel plans (perhaps including traffic like _Google Maps_)
--

+ Understanding the effects of change
    - Climate change
    - Rule changes via Congress or companies
    - Effect of a drug on disease outcomes
    - Effect of education and behavioral patterns on future earnings
    
    
---

# Data-driven models

&gt; Can we use data collected on various aspects of a particular context to understand the relationships between the different aspects?

+ How does increased smoking affect your risk of getting lung cancer? (causality/association)
    - Does genetics matter?
    - Does the kind of smoking matter?
    - Does gender matter?

---

# Data-driven models

&gt; Can we use data collected on various aspects of a particular context to understand the relationships between the different aspects?

+ What is your lifetime risk of breast cancer? (prediction)
    - What if you have a sister with breast cancer?
    - What if you had early menarche?
    - What if you are of Ashkenazi Jewish heritage?
    
.right[[The Gail Model from NCI](https://bcrisktool.cancer.gov/)]

---

# Association models 

These are more traditional, highly interpretative models that look at **how** different predictors
affect outcome.

+ Linear regression
+ Logistic regression
+ Cox proportional hazards regression
+ Decision trees

Since these models have a particular known structure determined by the modeler, they can 
be used on relatively small datasets

You can easily understand which predictors have more "weight" in influencing the outcome

You can literally write down how a prediction would be made

---

# Predictive models

These are more recent models that primarily look to provide good predictions of an outcome, and 
the way the predictions are made is left opaque (often called a _black box_)

+ Deep Learning (or Neural Networks)
+ Random Forests
+ Support Vector Machines
+ Gradient Boosting Machines

These models require data to both determine the structure of the model as well as make the predictions, so they require lots of data to _train_ on

The relative "weight" of predictors in influencing the **predictions** can be obtained

The effect of individual predictors is not easily interpretable, though this is changing, often using [SHAP values](https://blog.datascienceheroes.com/how-to-interpret-shap-values-in-r/)

They require a different **philosophic perspective** than traditional association models

---

# Datasets

We will use the `pbc` data from the `survival` package, and the in-built `mtcars` dataset.


```r
library(survival)
str(pbc)
```

```
'data.frame':	418 obs. of  20 variables:
 $ id      : int  1 2 3 4 5 6 7 8 9 10 ...
 $ time    : int  400 4500 1012 1925 1504 2503 1832 2466 2400 51 ...
 $ status  : int  2 0 2 2 1 2 0 2 2 2 ...
 $ trt     : Factor w/ 2 levels "1","2": 1 1 1 1 2 2 2 2 1 2 ...
 $ age     : num  58.8 56.4 70.1 54.7 38.1 ...
 $ sex     : Factor w/ 2 levels "m","f": 2 2 1 2 2 2 2 2 2 2 ...
 $ ascites : int  1 0 0 0 0 0 0 0 0 1 ...
 $ hepato  : int  1 1 0 1 1 1 1 0 0 0 ...
 $ spiders : int  1 1 0 1 1 0 0 0 1 1 ...
 $ edema   : num  1 0 0.5 0.5 0 0 0 0 0 1 ...
 $ bili    : num  14.5 1.1 1.4 1.8 3.4 0.8 1 0.3 3.2 12.6 ...
 $ chol    : int  261 302 176 244 279 248 322 280 562 200 ...
 $ albumin : num  2.6 4.14 3.48 2.54 3.53 3.98 4.09 4 3.08 2.74 ...
 $ copper  : int  156 54 210 64 143 50 52 52 79 140 ...
 $ alk.phos: num  1718 7395 516 6122 671 ...
 $ ast     : num  137.9 113.5 96.1 60.6 113.2 ...
 $ trig    : int  172 88 55 92 72 63 213 189 88 143 ...
 $ platelet: int  190 221 151 183 136 NA 204 373 251 302 ...
 $ protime : num  12.2 10.6 12 10.3 10.9 11 9.7 11 11 11.5 ...
 $ stage   : int  4 3 4 4 3 3 3 3 2 4 ...
```

---
class: inverse, middle, center

# The formula interface

---

# Representing model relationships

In R, there is a particularly convenient way to express models, where you have

- one dependent variable
- one or more independent variables, with possible transformations and interactions

```
y ~ x1 + x2 + x1:x2 + I(x3^2) + x4*x5
```

--

`y` depends on ...
--

- `x1` and `x2` linearly
--

- the interaction of `x1` and `x2` (represented as `x1:x2`)
--

- the square of `x3` (the `I()` notation ensures that the `^` symbol is interpreted correctly)
--

- `x4`, `x5` and their interaction (same as `x4 + x5 + x4:x5`)

---

# Representing model relationships

```
y ~ x1 + x2 + x1:x2 + I(x3^2) + x4*x5
```

This interpretation holds for the vast majority of statistical models in R

- For decision trees and random forests and neural networks, don't add interactions or transformations, since the model will try to figure those out on their own

---

# Our first model


```r
myLinearModel &lt;- lm(chol ~ bili, data = pbc)
```

Note that everything in R is an **object**, so you can store a model in a variable name.

This statement runs the model and stored the fitted model in `myLinearModel`

R does not interpret the model, evaluate the adequacy or appropriateness of the model, or comment on whether looking at the relationship between cholesterol and bilirubin makes any kind of sense.

--

.bigblockquote[It just fits the model it is given]

---

# Our first model


```r
myLinearModel
```

```

Call:
lm(formula = chol ~ bili, data = pbc)

Coefficients:
(Intercept)         bili  
     303.20        20.24  
```

&gt; Not very informative, is it?

---

# Our first model


```r
summary(myLinearModel)
```

```

Call:
lm(formula = chol ~ bili, data = pbc)

Residuals:
    Min      1Q  Median      3Q     Max 
-565.39  -89.90  -35.36   44.92 1285.33 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  303.204     15.601  19.435  &lt; 2e-16 ***
bili          20.240      2.785   7.267 3.63e-12 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 213.2 on 282 degrees of freedom
  (134 observations deleted due to missingness)
Multiple R-squared:  0.1577,	Adjusted R-squared:  0.1547 
F-statistic:  52.8 on 1 and 282 DF,  p-value: 3.628e-12
```

&gt; A little better

???

Talk about the different metrics in this slide


---

# Our first model


```r
broom::tidy(myLinearModel)
```

```
# A tibble: 2 x 5
  term        estimate std.error statistic  p.value
  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
1 (Intercept)    303.      15.6      19.4  5.65e-54
2 bili            20.2      2.79      7.27 3.63e-12
```


```r
broom::glance(myLinearModel)
```

```
# A tibble: 1 x 12
  r.squared adj.r.squared sigma statistic  p.value    df logLik   AIC   BIC  deviance df.residual  nobs
      &lt;dbl&gt;         &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;       &lt;int&gt; &lt;int&gt;
1     0.158         0.155  213.      52.8 3.63e-12     1 -1925. 3856. 3867. 12823770.         282   284
```

---

# Our first model


```r
aug &lt;- broom::augment(myLinearModel)
head(aug)
```

```
# A tibble: 6 x 9
  .rownames  chol  bili .fitted .resid    .hat .sigma   .cooksd .std.resid
  &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;
1 1           261  14.5    597. -336.  0.0250    213. 0.0326        -1.59 
2 2           302   1.1    325.  -23.5 0.00433   214. 0.0000264     -0.110
3 3           176   1.4    332. -156.  0.00412   213. 0.00111       -0.731
4 4           244   1.8    340.  -95.6 0.00389   214. 0.000395      -0.449
5 5           279   3.4    372.  -93.0 0.00352   214. 0.000338      -0.437
6 6           248   0.8    319.  -71.4 0.00457   214. 0.000258      -0.336
```

.pull-left[
+ `.fitted` = Fitted values
+ `.resid` = Residuals
+ `.std.resid` = Standardized residuals
]
.pull-right[
+ `.hat` = Diagnoal of "hat" matrix (leverage)
+ `.cooksd` = Cook's distance
+ `.signma` = Residual sd if observation is dropped
]

---

# Our first model

We do need some sense as to how well this model fit the data


.panelset[
.panel[.panel-name[Residual plot]
.pull-left[

```r
ggplot(aug, aes(x = .fitted, y = .resid))+
  geom_point()+
  geom_smooth()+
  geom_hline(yintercept = 0, linetype=2)+
  labs(x = 'Fitted values',
       y = 'Residuals')
```

Unexplained patterns remaining&lt;br&gt;
Ideal is for residuals centered around 0
]
.pull-right[
![](00_modeling_files/figure-html/unnamed-chunk-11-1.png)&lt;!-- --&gt;

]]
.panel[
.panel-name[Normal Q-Q]
.pull-left[

```r
ggplot(aug, aes(sample = .std.resid))+
  stat_qq() + stat_qq_line(linetype=2)+
  labs(x = 'Theoretical quantiles',
       y = 'Standardized residuals')
```

How close residuals follow Gaussian distribution
]
.pull-right[
![](00_modeling_files/figure-html/unnamed-chunk-12-1.png)&lt;!-- --&gt;

]
]
.panel[
.panel-name[Scale-location]
.pull-left[

```r
ggplot(aug, aes(x = .fitted, y = sqrt(.std.resid)))+
  geom_point()+
  geom_smooth()+
  labs(x = 'Fitted values',
       y = expression(sqrt("Standardized residuals")))
```

See if variability is non-constant
]
.pull-right
![](00_modeling_files/figure-html/unnamed-chunk-13-1.png)&lt;!-- --&gt;

]
.panel[
.panel-name[Residuals vs Leverage]
.pull-left[

```r
ggplot(aug, aes(x = .hat, y = .std.resid))+
  geom_point()+
  geom_smooth(span=0.25)+
  labs(x = 'Leverage',
       y = 'Standardized residuals')
```
Outlier detection:&lt;br&gt;
Look for points with high leverage (influences the model fit) and large residuals (not approximated well by the model)

]
.pull-right[
![](00_modeling_files/figure-html/unnamed-chunk-14-1.png)&lt;!-- --&gt;

]

]
]

---

# Our first model

Let's see if we have some strangeness going on

.pull-left[

```r
ggplot(pbc, aes(x = bili))+geom_density()
```

We'd like this to be a bit more "Gaussian" for better behavior
]
.pull-right[
![](00_modeling_files/figure-html/09-Modeling-23-1.png)&lt;!-- --&gt;

]

---

# Our first model

Let's see if we have some strangeness going on

.pull-left[

```r
ggplot(pbc, aes(x = log(bili)))+geom_density()
```

]
.pull-right[
![](00_modeling_files/figure-html/09-Modeling-25-1.png)&lt;!-- --&gt;

]

---

# Our first model


```r
pbc2 &lt;- pbc %&gt;% mutate(bili = log(bili))
myLinearModel2 &lt;- lm(chol~bili, data = pbc2)
aug2 &lt;- broom::augment(myLinearModel2)
summary(myLinearModel2)
```

```

Call:
lm(formula = chol ~ bili, data = pbc2)

Residuals:
    Min      1Q  Median      3Q     Max 
-440.07  -94.35  -21.07   42.67 1221.86 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)   311.48      14.28  21.816  &lt; 2e-16 ***
bili           98.80      12.07   8.186 9.42e-15 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 208.9 on 282 degrees of freedom
  (134 observations deleted due to missingness)
Multiple R-squared:  0.192,	Adjusted R-squared:  0.1891 
F-statistic: 67.01 on 1 and 282 DF,  p-value: 9.416e-15
```

---

# Our first model

.panelset[
.panel[.panel-name[Residual plot]
.pull-left[

```r
ggplot(aug2, aes(x = .fitted, y = .resid))+
  geom_point()+
  geom_smooth()+
  geom_hline(yintercept = 0, linetype=2)+
  labs(x = 'Fitted values',
       y = 'Residuals')
```

Unexplained patterns remaining&lt;br&gt;
Ideal is for residuals centered around 0
]
.pull-right[
![](00_modeling_files/figure-html/unnamed-chunk-15-1.png)&lt;!-- --&gt;

]]
.panel[
.panel-name[Normal Q-Q]
.pull-left[

```r
ggplot(aug2, aes(sample = .std.resid))+
  stat_qq() + stat_qq_line(linetype=2)+
  labs(x = 'Theoretical quantiles',
       y = 'Standardized residuals')
```

How close residuals follow Gaussian distribution
]
.pull-right[
![](00_modeling_files/figure-html/unnamed-chunk-16-1.png)&lt;!-- --&gt;

]
]
.panel[
.panel-name[Scale-location]
.pull-left[

```r
ggplot(aug2, aes(x = .fitted, y = sqrt(.std.resid)))+
  geom_point()+
  geom_smooth()+
  labs(x = 'Fitted values',
       y = expression(sqrt("Standardized residuals")))
```

See if variability is non-constant
]
.pull-right
![](00_modeling_files/figure-html/unnamed-chunk-17-1.png)&lt;!-- --&gt;

]
.panel[
.panel-name[Residuals vs Leverage]
.pull-left[

```r
ggplot(aug2, aes(x = .hat, y = .std.resid))+
  geom_point()+
  geom_smooth(span=0.25)+
  labs(x = 'Leverage',
       y = 'Standardized residuals')
```
Outlier detection:&lt;br&gt;
Look for points with high leverage (influences the model fit) and large residuals (not approximated well by the model)

]
.pull-right[
![](00_modeling_files/figure-html/unnamed-chunk-18-1.png)&lt;!-- --&gt;

]

]
]


---


# Predictions


```r
head(predict(myLinearModel2, newdata = pbc))
```

```
        1         2         3         4         5         6 
1744.0987  420.1650  449.8053  489.3257  647.4073  390.5247 
```

The `newdata` has to have the same format and components as the original data the model was trained on

---

# Categorical predictors


```r
myLM3 &lt;- lm(chol ~ log(bili) + sex, data = pbc)
broom::tidy(myLM3)
```

```
# A tibble: 3 x 5
  term        estimate std.error statistic  p.value
  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
1 (Intercept)    283.       36.6     7.71  2.14e-13
2 log(bili)       99.6      12.1     8.22  7.37e-15
3 sexf            32.5      37.8     0.858 3.92e- 1
```

R has a somewhat unfortunate notation for categorical variables here, as `{variable name}{level}`

---
class: inverse, middle, center

# Logistic regression

---

# The logistic transformation

For an outcome which is binary (0/1), what is really modeled is the **probability** that the outcome is 1, usually denoted by _p_.

However, we know `\(0 \leq p \leq 1\)`, so what if the model gives a prediction outside this range!!

The logistic transform takes _p_ to 

$$
\text{logit}(p) = \log\left(\frac{p}{1-p}\right)
$$

and we model _logit(p)_, which has a range from `\(-\infty\)` to `\(\infty\)`

---

# Logistic regression

Logistic regression is a special case of a **generalized linear model**, so the function we use to run a logistic regression is `glm`


```r
myLR &lt;- glm(spiders ~ albumin + bili + chol, data = pbc, family = binomial)
myLR
```

```

Call:  glm(formula = spiders ~ albumin + bili + chol, family = binomial, 
    data = pbc)

Coefficients:
(Intercept)      albumin         bili         chol  
  2.3326484   -0.9954927    0.0995915   -0.0003176  

Degrees of Freedom: 283 Total (i.e. Null);  280 Residual
  (134 observations deleted due to missingness)
Null Deviance:	    341.4 
Residual Deviance: 315.2 	AIC: 323.2
```

- We have to add the `family = binomial` as an argument, since this is a special kind of GLM
- All these models only use complete data; they kick out rows with missing data

---

# Logistic regression


```r
broom::tidy(myLR)
```

```
# A tibble: 4 x 5
  term         estimate std.error statistic p.value
  &lt;chr&gt;           &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;
1 (Intercept)  2.33      1.30         1.80  0.0717 
2 albumin     -0.995     0.362       -2.75  0.00595
3 bili         0.0996    0.0344       2.89  0.00381
4 chol        -0.000318  0.000615    -0.517 0.605  
```
--


```r
broom::glance(myLR)
```

```
# A tibble: 1 x 8
  null.deviance df.null logLik   AIC   BIC deviance df.residual  nobs
          &lt;dbl&gt;   &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;       &lt;int&gt; &lt;int&gt;
1          341.     283  -158.  323.  338.     315.         280   284
```

---

# Predictions from logistic regression


```r
head(predict(myLR))
```

```
          1           2           3           4           5           6 
 1.10554163 -1.77506554 -1.04814132 -0.09414055 -0.93144911 -1.62851203 
```
--

These are on the "wrong" scale. We would expect probabilities
--


```r
head(predict(myLR, type='response'))
```

```
        1         2         3         4         5         6 
0.7512970 0.1449135 0.2595822 0.4764822 0.2826308 0.1640343 
```

--

or you can use `plogis(predict(myLR))` for the inverse logistic transform

---
class: middle,center,inverse

# Survival data

---

# Survival data

Survival data comprises two parts in general

+ The survival time
    - Time to event
    - Last time subject was observed (censored)
+ The status indicator
    - Is event observed or is subject censored

In R, we denote this composite response using the function `Surv`. For the pbc 
data, the survival time is `time` and the status indicator is `status`, where `status=2` denotes death. So this response would be denoted by 


```r
Surv(time, status==2)
```

    
---

# Survival data

We summarise survival data with its *survival distribution*, which gives, 
for each time point t, the proportion of subjects still surviving and being observed
at time t

This is estimated by the **Kaplan-Meier product-limit estimator**. 

.pull-left[

```r
library(survival)
library(survminer)

# Compute the KM curve
s &lt;- survfit(Surv(time, status==2)~1, data=pbc)

# Plot the KM curve
ggsurvplot(s)
```

These plots are ggplot2 objects, so we can post-process them using a ggplot2 pipeline
]
.pull-right[
![](00_modeling_files/figure-html/unnamed-chunk-20-1.png)&lt;!-- --&gt;
The vertical lines denotes when the individuals who were censored were last observed (the censoring times)
]

---

# Survival data

For stratified data (say two arms of a clinical trial) we can plot KM curves for each stratum and compare them in a single plot

.panelset[
.panel[
.panel-name[Basic]
.pull-left[

```r
pbc &lt;- pbc %&gt;% mutate(trt = as.factor(trt))
s &lt;- survfit(Surv(time, status==2) ~ trt, data=pbc)
ggsurvplot(s)
```
]
.pull-right[
![](00_modeling_files/figure-html/unnamed-chunk-21-1.png)&lt;!-- --&gt;
]]
.panel[
.panel-name[Add p-value]
.pull-left[

```r
pbc &lt;- pbc %&gt;% mutate(trt = as.factor(trt))
s &lt;- survfit(Surv(time, status==2) ~ trt, data=pbc)
ggsurvplot(s, conf.int = F, pval = T)
```
]
.pull-right[
![](00_modeling_files/figure-html/unnamed-chunk-22-1.png)&lt;!-- --&gt;
]]
.panel[
.panel-name[With risk table]
.pull-left[

```r
pbc &lt;- pbc %&gt;% mutate(trt = as.factor(trt))
s &lt;- survfit(Surv(time, status==2) ~ trt, data=pbc)
ggsurvplot(s, conf.int = F, pval = T, 
           risk.table=T)
```
]
.pull-right[
![](00_modeling_files/figure-html/unnamed-chunk-23-1.png)&lt;!-- --&gt;
]]
.panel[
.panel-name[Add median survival]
.pull-left[

```r
pbc &lt;- pbc %&gt;% mutate(trt = as.factor(trt))
s &lt;- survfit(Surv(time, status==2) ~ trt, data=pbc)
ggsurvplot(s, conf.int = F, pval = T, 
           risk.table=T,
           surv.median.line = 'hv')
```
]
.pull-right[
![](00_modeling_files/figure-html/unnamed-chunk-24-1.png)&lt;!-- --&gt;
]]
]

---



# Modeling survival data
## The Cox proportional hazards regression

.pull-left[

```r
library(survival)
pbc1 &lt;- pbc %&gt;% mutate(across(c(trt, ascites, hepato, spiders,stage), as.factor))
survModel &lt;- coxph(Surv(time, status==2) ~ trt + age + sex + 
                    hepato + spiders + ascites + stage,
                  data = pbc1)
```
]
.pull-right[

```r
broom::tidy(survModel)
```

```
# A tibble: 9 x 5
  term     estimate std.error statistic      p.value
  &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;        &lt;dbl&gt;
1 trt2       0.0706   0.189       0.373 0.709       
2 age        0.0217   0.00938     2.31  0.0207      
3 sexf      -0.200    0.261      -0.766 0.444       
4 hepato1    0.588    0.226       2.60  0.00943     
5 spiders1   0.524    0.201       2.60  0.00920     
6 ascites1   1.47     0.270       5.46  0.0000000482
7 stage2     1.24     1.04        1.19  0.233       
8 stage3     1.75     1.02        1.71  0.0870      
9 stage4     2.00     1.04        1.93  0.0537      
```

]
---
class: inverse, middle, center

# Model selection

---

# How to get the "best" model

Generally getting to the best model involves

- looking at a lot of graphs
- Fitting lots of models
- Comparing the model fits to see what seems good

Sometimes if you have two models that fit about the same, you take the smaller, less complex model (Occam's Razor)

Generally it is not recommended that you use automated model selection methods. It screws up your error rates and may not be the right end result for your objectives


--

&gt; Model building and selection is an art

---

# Clues to follow

You can look at the relative weights (size of coefficient and its p-value) of different predictors

- These weights will change once you change the model, so be aware of that

--

You can trim the number of variables based on collinearities

- If several variables are essentially measuring the same thing, use one of them

--

You can look at residuals for clues about transformations

--

You can look at graphs, as well as science, for clues about interactions (synergies and antagonisms)

---

# Automated model selection


```r
# install.packages('leaps')
library(leaps)
mtcars1 &lt;- mtcars %&gt;% mutate_at(vars(cyl, vs:carb), as.factor)
all_subsets &lt;- regsubsets(mpg~., data = mtcars1)
all_subsets
```

```
Subset selection object
Call: regsubsets.formula(mpg ~ ., data = mtcars1)
16 Variables  (and intercept)
      Forced in Forced out
cyl6      FALSE      FALSE
cyl8      FALSE      FALSE
disp      FALSE      FALSE
hp        FALSE      FALSE
drat      FALSE      FALSE
wt        FALSE      FALSE
qsec      FALSE      FALSE
vs1       FALSE      FALSE
am1       FALSE      FALSE
gear4     FALSE      FALSE
gear5     FALSE      FALSE
carb2     FALSE      FALSE
carb3     FALSE      FALSE
carb4     FALSE      FALSE
carb6     FALSE      FALSE
carb8     FALSE      FALSE
1 subsets of each size up to 8
Selection Algorithm: exhaustive
```

---

# Automated model selection

Which has the best R&lt;sup&gt;2&lt;/sup&gt;?


```r
ind &lt;- which.max(summary(all_subsets)$adjr2)
summary(all_subsets)$which[ind,]
```

```
(Intercept)        cyl6        cyl8        disp          hp        drat          wt        qsec         vs1         am1       gear4       gear5 
       TRUE        TRUE       FALSE       FALSE        TRUE       FALSE        TRUE       FALSE        TRUE        TRUE       FALSE       FALSE 
      carb2       carb3       carb4       carb6       carb8 
      FALSE       FALSE       FALSE       FALSE       FALSE 
```




---
class: middle,center,inverse

# Reporting modeling results

---

# Tabular results

The **gtsummary** package provides nice tabular summaries of model results, and
can be embeeded in HTML or Word documents (we'll see this in Week 6)

.panelset[
.panel[
.panel-name[Linear regression]
.pull-left[

```r
library(gtsummary)
theme_gtsummary_compact()
tbl_regression(myLinearModel)
```
]
.pull-right[
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#tzbmyvxdgl .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: small;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#tzbmyvxdgl .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#tzbmyvxdgl .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#tzbmyvxdgl .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#tzbmyvxdgl .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#tzbmyvxdgl .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#tzbmyvxdgl .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#tzbmyvxdgl .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#tzbmyvxdgl .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#tzbmyvxdgl .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#tzbmyvxdgl .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#tzbmyvxdgl .gt_group_heading {
  padding: 1px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#tzbmyvxdgl .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#tzbmyvxdgl .gt_from_md > :first-child {
  margin-top: 0;
}

#tzbmyvxdgl .gt_from_md > :last-child {
  margin-bottom: 0;
}

#tzbmyvxdgl .gt_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#tzbmyvxdgl .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#tzbmyvxdgl .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
}

#tzbmyvxdgl .gt_first_summary_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#tzbmyvxdgl .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
}

#tzbmyvxdgl .gt_first_grand_summary_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#tzbmyvxdgl .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#tzbmyvxdgl .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#tzbmyvxdgl .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#tzbmyvxdgl .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 1px;
}

#tzbmyvxdgl .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#tzbmyvxdgl .gt_sourcenote {
  font-size: 90%;
  padding: 1px;
}

#tzbmyvxdgl .gt_left {
  text-align: left;
}

#tzbmyvxdgl .gt_center {
  text-align: center;
}

#tzbmyvxdgl .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#tzbmyvxdgl .gt_font_normal {
  font-weight: normal;
}

#tzbmyvxdgl .gt_font_bold {
  font-weight: bold;
}

#tzbmyvxdgl .gt_font_italic {
  font-style: italic;
}

#tzbmyvxdgl .gt_super {
  font-size: 65%;
}

#tzbmyvxdgl .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="tzbmyvxdgl" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Beta</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>95% CI</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>p-value</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_left">bili</td>
      <td class="gt_row gt_center">20</td>
      <td class="gt_row gt_center">15, 26</td>
      <td class="gt_row gt_center"><0.001</td>
    </tr>
  </tbody>
  
  <tfoot>
    <tr class="gt_footnotes">
      <td colspan="4">
        <p class="gt_footnote">
          <sup class="gt_footnote_marks">
            <em>1</em>
          </sup>
           
          CI = Confidence Interval
          <br />
        </p>
      </td>
    </tr>
  </tfoot>
</table></div>
]
]
.panel[
.panel-name[Logistic regression]
.pull-left[

```r
library(gtsummary)
tbl_regression(myLR, exponentiate = T)
```
]
.pull-right[
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#jhccaomwpi .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: small;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#jhccaomwpi .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#jhccaomwpi .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#jhccaomwpi .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#jhccaomwpi .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#jhccaomwpi .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#jhccaomwpi .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#jhccaomwpi .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#jhccaomwpi .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#jhccaomwpi .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#jhccaomwpi .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#jhccaomwpi .gt_group_heading {
  padding: 1px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#jhccaomwpi .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#jhccaomwpi .gt_from_md > :first-child {
  margin-top: 0;
}

#jhccaomwpi .gt_from_md > :last-child {
  margin-bottom: 0;
}

#jhccaomwpi .gt_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#jhccaomwpi .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#jhccaomwpi .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
}

#jhccaomwpi .gt_first_summary_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#jhccaomwpi .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
}

#jhccaomwpi .gt_first_grand_summary_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#jhccaomwpi .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#jhccaomwpi .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#jhccaomwpi .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#jhccaomwpi .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 1px;
}

#jhccaomwpi .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#jhccaomwpi .gt_sourcenote {
  font-size: 90%;
  padding: 1px;
}

#jhccaomwpi .gt_left {
  text-align: left;
}

#jhccaomwpi .gt_center {
  text-align: center;
}

#jhccaomwpi .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#jhccaomwpi .gt_font_normal {
  font-weight: normal;
}

#jhccaomwpi .gt_font_bold {
  font-weight: bold;
}

#jhccaomwpi .gt_font_italic {
  font-style: italic;
}

#jhccaomwpi .gt_super {
  font-size: 65%;
}

#jhccaomwpi .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="jhccaomwpi" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>OR</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>95% CI</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>p-value</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_left">albumin</td>
      <td class="gt_row gt_center">0.37</td>
      <td class="gt_row gt_center">0.18, 0.74</td>
      <td class="gt_row gt_center">0.006</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">bili</td>
      <td class="gt_row gt_center">1.10</td>
      <td class="gt_row gt_center">1.04, 1.19</td>
      <td class="gt_row gt_center">0.004</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">chol</td>
      <td class="gt_row gt_center">1.00</td>
      <td class="gt_row gt_center">1.00, 1.00</td>
      <td class="gt_row gt_center">0.6</td>
    </tr>
  </tbody>
  
  <tfoot>
    <tr class="gt_footnotes">
      <td colspan="4">
        <p class="gt_footnote">
          <sup class="gt_footnote_marks">
            <em>1</em>
          </sup>
           
          OR = Odds Ratio, CI = Confidence Interval
          <br />
        </p>
      </td>
    </tr>
  </tfoot>
</table></div>
]
]
.panel[
.panel-name[Cox regression]
.pull-left[

```r
library(gtsummary)
tbl_regression(survModel, exponentiate = T)
```
]
.pull-right[
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#uczznjzbcs .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: small;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#uczznjzbcs .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#uczznjzbcs .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#uczznjzbcs .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#uczznjzbcs .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#uczznjzbcs .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#uczznjzbcs .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#uczznjzbcs .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#uczznjzbcs .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#uczznjzbcs .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#uczznjzbcs .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#uczznjzbcs .gt_group_heading {
  padding: 1px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#uczznjzbcs .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#uczznjzbcs .gt_from_md > :first-child {
  margin-top: 0;
}

#uczznjzbcs .gt_from_md > :last-child {
  margin-bottom: 0;
}

#uczznjzbcs .gt_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#uczznjzbcs .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#uczznjzbcs .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
}

#uczznjzbcs .gt_first_summary_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#uczznjzbcs .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
}

#uczznjzbcs .gt_first_grand_summary_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#uczznjzbcs .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#uczznjzbcs .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#uczznjzbcs .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#uczznjzbcs .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 1px;
}

#uczznjzbcs .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#uczznjzbcs .gt_sourcenote {
  font-size: 90%;
  padding: 1px;
}

#uczznjzbcs .gt_left {
  text-align: left;
}

#uczznjzbcs .gt_center {
  text-align: center;
}

#uczznjzbcs .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#uczznjzbcs .gt_font_normal {
  font-weight: normal;
}

#uczznjzbcs .gt_font_bold {
  font-weight: bold;
}

#uczznjzbcs .gt_font_italic {
  font-style: italic;
}

#uczznjzbcs .gt_super {
  font-size: 65%;
}

#uczznjzbcs .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="uczznjzbcs" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>HR</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>95% CI</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>p-value</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_left">trt</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">1</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">2</td>
      <td class="gt_row gt_center">1.07</td>
      <td class="gt_row gt_center">0.74, 1.55</td>
      <td class="gt_row gt_center">0.7</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">age</td>
      <td class="gt_row gt_center">1.02</td>
      <td class="gt_row gt_center">1.00, 1.04</td>
      <td class="gt_row gt_center">0.021</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">sex</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">m</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">f</td>
      <td class="gt_row gt_center">0.82</td>
      <td class="gt_row gt_center">0.49, 1.37</td>
      <td class="gt_row gt_center">0.4</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">hepato</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">0</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">1</td>
      <td class="gt_row gt_center">1.80</td>
      <td class="gt_row gt_center">1.15, 2.81</td>
      <td class="gt_row gt_center">0.009</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">spiders</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">0</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">1</td>
      <td class="gt_row gt_center">1.69</td>
      <td class="gt_row gt_center">1.14, 2.50</td>
      <td class="gt_row gt_center">0.009</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">ascites</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">0</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">1</td>
      <td class="gt_row gt_center">4.36</td>
      <td class="gt_row gt_center">2.57, 7.40</td>
      <td class="gt_row gt_center"><0.001</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">stage</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">1</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">2</td>
      <td class="gt_row gt_center">3.46</td>
      <td class="gt_row gt_center">0.45, 26.6</td>
      <td class="gt_row gt_center">0.2</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">3</td>
      <td class="gt_row gt_center">5.76</td>
      <td class="gt_row gt_center">0.78, 42.8</td>
      <td class="gt_row gt_center">0.087</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">4</td>
      <td class="gt_row gt_center">7.39</td>
      <td class="gt_row gt_center">0.97, 56.3</td>
      <td class="gt_row gt_center">0.054</td>
    </tr>
  </tbody>
  
  <tfoot>
    <tr class="gt_footnotes">
      <td colspan="4">
        <p class="gt_footnote">
          <sup class="gt_footnote_marks">
            <em>1</em>
          </sup>
           
          HR = Hazard Ratio, CI = Confidence Interval
          <br />
        </p>
      </td>
    </tr>
  </tfoot>
</table></div>
]
]
]

---

# A more involved example


```r
m1 &lt;- lm(body_mass_g ~., data=penguins)
broom::tidy(m1)
```

```
# A tibble: 10 x 5
   term              estimate std.error statistic  p.value
   &lt;chr&gt;                &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
 1 (Intercept)        84088.   41912.       2.01  4.57e- 2
 2 speciesChinstrap    -283.      88.8     -3.18  1.60e- 3
 3 speciesGentoo        891.     145.       6.16  2.12e- 9
 4 islandDream          -21.2     58.4     -0.363 7.17e- 1
 5 islandTorgersen      -58.8     60.9     -0.966 3.35e- 1
 6 bill_length_mm        19.0      7.11     2.67  8.05e- 3
 7 bill_depth_mm         60.8     20.0      3.04  2.56e- 3
 8 flipper_length_mm     18.5      3.13     5.91  8.46e- 9
 9 sexmale              379.      48.1      7.88  4.95e-14
10 year                 -42.8     20.9     -2.04  4.19e- 2
```

---

# A quick pipeline to extract factor levels


```r
b &lt;- broom::tidy(m1)

# extract feature names
feature_names &lt;- c('\\(Intercept\\)',attr(terms(m1),'term.labels'))
feature_query &lt;- paste(feature_names, collapse='|')
b &lt;- b %&gt;% 
  mutate(features = str_extract(term, feature_query),
         feature_levels = str_remove(term, feature_query)) %&gt;% 
  relocate(features, feature_levels, .after=term)
b
```

```
# A tibble: 10 x 7
   term              features          feature_levels estimate std.error statistic  p.value
   &lt;chr&gt;             &lt;chr&gt;             &lt;chr&gt;             &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
 1 (Intercept)       (Intercept)       ""              84088.   41912.       2.01  4.57e- 2
 2 speciesChinstrap  species           "Chinstrap"      -283.      88.8     -3.18  1.60e- 3
 3 speciesGentoo     species           "Gentoo"          891.     145.       6.16  2.12e- 9
 4 islandDream       island            "Dream"           -21.2     58.4     -0.363 7.17e- 1
 5 islandTorgersen   island            "Torgersen"       -58.8     60.9     -0.966 3.35e- 1
 6 bill_length_mm    bill_length_mm    ""                 19.0      7.11     2.67  8.05e- 3
 7 bill_depth_mm     bill_depth_mm     ""                 60.8     20.0      3.04  2.56e- 3
 8 flipper_length_mm flipper_length_mm ""                 18.5      3.13     5.91  8.46e- 9
 9 sexmale           sex               "male"            379.      48.1      7.88  4.95e-14
10 year              year              ""                -42.8     20.9     -2.04  4.19e- 2
```

---



count: false
 

.panel1-mod1-auto[

```r
*tbl_regression(m1,
* label = list(bill_length_mm ~ 'Bill length (mm)',
*              bill_depth_mm ~ 'Bill depth (mm)',
*              flipper_length_mm ~ 'Flipper length (mm)'))
```
]
 
.panel2-mod1-auto[
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#qdetyvskwa .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: small;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#qdetyvskwa .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qdetyvskwa .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#qdetyvskwa .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#qdetyvskwa .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qdetyvskwa .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qdetyvskwa .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#qdetyvskwa .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#qdetyvskwa .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#qdetyvskwa .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#qdetyvskwa .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#qdetyvskwa .gt_group_heading {
  padding: 1px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#qdetyvskwa .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#qdetyvskwa .gt_from_md > :first-child {
  margin-top: 0;
}

#qdetyvskwa .gt_from_md > :last-child {
  margin-bottom: 0;
}

#qdetyvskwa .gt_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#qdetyvskwa .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#qdetyvskwa .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
}

#qdetyvskwa .gt_first_summary_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#qdetyvskwa .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
}

#qdetyvskwa .gt_first_grand_summary_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#qdetyvskwa .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#qdetyvskwa .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qdetyvskwa .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qdetyvskwa .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 1px;
}

#qdetyvskwa .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qdetyvskwa .gt_sourcenote {
  font-size: 90%;
  padding: 1px;
}

#qdetyvskwa .gt_left {
  text-align: left;
}

#qdetyvskwa .gt_center {
  text-align: center;
}

#qdetyvskwa .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#qdetyvskwa .gt_font_normal {
  font-weight: normal;
}

#qdetyvskwa .gt_font_bold {
  font-weight: bold;
}

#qdetyvskwa .gt_font_italic {
  font-style: italic;
}

#qdetyvskwa .gt_super {
  font-size: 65%;
}

#qdetyvskwa .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="qdetyvskwa" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Beta</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>95% CI</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>p-value</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_left">species</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Adelie</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Chinstrap</td>
      <td class="gt_row gt_center">-283</td>
      <td class="gt_row gt_center">-457, -108</td>
      <td class="gt_row gt_center">0.002</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Gentoo</td>
      <td class="gt_row gt_center">891</td>
      <td class="gt_row gt_center">607, 1,175</td>
      <td class="gt_row gt_center"><0.001</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">island</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Biscoe</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Dream</td>
      <td class="gt_row gt_center">-21</td>
      <td class="gt_row gt_center">-136, 94</td>
      <td class="gt_row gt_center">0.7</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Torgersen</td>
      <td class="gt_row gt_center">-59</td>
      <td class="gt_row gt_center">-178, 61</td>
      <td class="gt_row gt_center">0.3</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">Bill length (mm)</td>
      <td class="gt_row gt_center">19</td>
      <td class="gt_row gt_center">5.0, 33</td>
      <td class="gt_row gt_center">0.008</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">Bill depth (mm)</td>
      <td class="gt_row gt_center">61</td>
      <td class="gt_row gt_center">21, 100</td>
      <td class="gt_row gt_center">0.003</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">Flipper length (mm)</td>
      <td class="gt_row gt_center">19</td>
      <td class="gt_row gt_center">12, 25</td>
      <td class="gt_row gt_center"><0.001</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">sex</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">female</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">male</td>
      <td class="gt_row gt_center">379</td>
      <td class="gt_row gt_center">284, 474</td>
      <td class="gt_row gt_center"><0.001</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">year</td>
      <td class="gt_row gt_center">-43</td>
      <td class="gt_row gt_center">-84, -1.6</td>
      <td class="gt_row gt_center">0.042</td>
    </tr>
  </tbody>
  
  <tfoot>
    <tr class="gt_footnotes">
      <td colspan="4">
        <p class="gt_footnote">
          <sup class="gt_footnote_marks">
            <em>1</em>
          </sup>
           
          CI = Confidence Interval
          <br />
        </p>
      </td>
    </tr>
  </tfoot>
</table></div>
]

---
count: false
 

.panel1-mod1-auto[

```r
tbl_regression(m1,
  label = list(bill_length_mm ~ 'Bill length (mm)',
               bill_depth_mm ~ 'Bill depth (mm)',
               flipper_length_mm ~ 'Flipper length (mm)')) %&gt;%
* add_global_p()
```
]
 
.panel2-mod1-auto[
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#upbykohouo .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: small;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#upbykohouo .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#upbykohouo .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#upbykohouo .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#upbykohouo .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#upbykohouo .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#upbykohouo .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#upbykohouo .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#upbykohouo .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#upbykohouo .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#upbykohouo .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#upbykohouo .gt_group_heading {
  padding: 1px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#upbykohouo .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#upbykohouo .gt_from_md > :first-child {
  margin-top: 0;
}

#upbykohouo .gt_from_md > :last-child {
  margin-bottom: 0;
}

#upbykohouo .gt_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#upbykohouo .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#upbykohouo .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
}

#upbykohouo .gt_first_summary_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#upbykohouo .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
}

#upbykohouo .gt_first_grand_summary_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#upbykohouo .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#upbykohouo .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#upbykohouo .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#upbykohouo .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 1px;
}

#upbykohouo .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#upbykohouo .gt_sourcenote {
  font-size: 90%;
  padding: 1px;
}

#upbykohouo .gt_left {
  text-align: left;
}

#upbykohouo .gt_center {
  text-align: center;
}

#upbykohouo .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#upbykohouo .gt_font_normal {
  font-weight: normal;
}

#upbykohouo .gt_font_bold {
  font-weight: bold;
}

#upbykohouo .gt_font_italic {
  font-style: italic;
}

#upbykohouo .gt_super {
  font-size: 65%;
}

#upbykohouo .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="upbykohouo" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Beta</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>95% CI</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>p-value</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_left">species</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"><0.001</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Adelie</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Chinstrap</td>
      <td class="gt_row gt_center">-283</td>
      <td class="gt_row gt_center">-457, -108</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Gentoo</td>
      <td class="gt_row gt_center">891</td>
      <td class="gt_row gt_center">607, 1,175</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left">island</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center">0.6</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Biscoe</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Dream</td>
      <td class="gt_row gt_center">-21</td>
      <td class="gt_row gt_center">-136, 94</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Torgersen</td>
      <td class="gt_row gt_center">-59</td>
      <td class="gt_row gt_center">-178, 61</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left">Bill length (mm)</td>
      <td class="gt_row gt_center">19</td>
      <td class="gt_row gt_center">5.0, 33</td>
      <td class="gt_row gt_center">0.008</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">Bill depth (mm)</td>
      <td class="gt_row gt_center">61</td>
      <td class="gt_row gt_center">21, 100</td>
      <td class="gt_row gt_center">0.003</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">Flipper length (mm)</td>
      <td class="gt_row gt_center">19</td>
      <td class="gt_row gt_center">12, 25</td>
      <td class="gt_row gt_center"><0.001</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">sex</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"><0.001</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">female</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">male</td>
      <td class="gt_row gt_center">379</td>
      <td class="gt_row gt_center">284, 474</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left">year</td>
      <td class="gt_row gt_center">-43</td>
      <td class="gt_row gt_center">-84, -1.6</td>
      <td class="gt_row gt_center">0.042</td>
    </tr>
  </tbody>
  
  <tfoot>
    <tr class="gt_footnotes">
      <td colspan="4">
        <p class="gt_footnote">
          <sup class="gt_footnote_marks">
            <em>1</em>
          </sup>
           
          CI = Confidence Interval
          <br />
        </p>
      </td>
    </tr>
  </tfoot>
</table></div>
]

---
count: false
 

.panel1-mod1-auto[

```r
tbl_regression(m1,
  label = list(bill_length_mm ~ 'Bill length (mm)',
               bill_depth_mm ~ 'Bill depth (mm)',
               flipper_length_mm ~ 'Flipper length (mm)')) %&gt;%
  add_global_p() %&gt;%
* bold_p(t = 0.05)
```
]
 
.panel2-mod1-auto[
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#resvrcyxoi .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: small;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#resvrcyxoi .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#resvrcyxoi .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#resvrcyxoi .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#resvrcyxoi .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#resvrcyxoi .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#resvrcyxoi .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#resvrcyxoi .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#resvrcyxoi .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#resvrcyxoi .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#resvrcyxoi .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#resvrcyxoi .gt_group_heading {
  padding: 1px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#resvrcyxoi .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#resvrcyxoi .gt_from_md > :first-child {
  margin-top: 0;
}

#resvrcyxoi .gt_from_md > :last-child {
  margin-bottom: 0;
}

#resvrcyxoi .gt_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#resvrcyxoi .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#resvrcyxoi .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
}

#resvrcyxoi .gt_first_summary_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#resvrcyxoi .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
}

#resvrcyxoi .gt_first_grand_summary_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#resvrcyxoi .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#resvrcyxoi .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#resvrcyxoi .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#resvrcyxoi .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 1px;
}

#resvrcyxoi .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#resvrcyxoi .gt_sourcenote {
  font-size: 90%;
  padding: 1px;
}

#resvrcyxoi .gt_left {
  text-align: left;
}

#resvrcyxoi .gt_center {
  text-align: center;
}

#resvrcyxoi .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#resvrcyxoi .gt_font_normal {
  font-weight: normal;
}

#resvrcyxoi .gt_font_bold {
  font-weight: bold;
}

#resvrcyxoi .gt_font_italic {
  font-style: italic;
}

#resvrcyxoi .gt_super {
  font-size: 65%;
}

#resvrcyxoi .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="resvrcyxoi" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Beta</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>95% CI</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>p-value</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_left">species</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center" style="font-weight: bold;"><0.001</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Adelie</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Chinstrap</td>
      <td class="gt_row gt_center">-283</td>
      <td class="gt_row gt_center">-457, -108</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Gentoo</td>
      <td class="gt_row gt_center">891</td>
      <td class="gt_row gt_center">607, 1,175</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left">island</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center">0.6</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Biscoe</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Dream</td>
      <td class="gt_row gt_center">-21</td>
      <td class="gt_row gt_center">-136, 94</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Torgersen</td>
      <td class="gt_row gt_center">-59</td>
      <td class="gt_row gt_center">-178, 61</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left">Bill length (mm)</td>
      <td class="gt_row gt_center">19</td>
      <td class="gt_row gt_center">5.0, 33</td>
      <td class="gt_row gt_center" style="font-weight: bold;">0.008</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">Bill depth (mm)</td>
      <td class="gt_row gt_center">61</td>
      <td class="gt_row gt_center">21, 100</td>
      <td class="gt_row gt_center" style="font-weight: bold;">0.003</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">Flipper length (mm)</td>
      <td class="gt_row gt_center">19</td>
      <td class="gt_row gt_center">12, 25</td>
      <td class="gt_row gt_center" style="font-weight: bold;"><0.001</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">sex</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center" style="font-weight: bold;"><0.001</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">female</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">male</td>
      <td class="gt_row gt_center">379</td>
      <td class="gt_row gt_center">284, 474</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left">year</td>
      <td class="gt_row gt_center">-43</td>
      <td class="gt_row gt_center">-84, -1.6</td>
      <td class="gt_row gt_center" style="font-weight: bold;">0.042</td>
    </tr>
  </tbody>
  
  <tfoot>
    <tr class="gt_footnotes">
      <td colspan="4">
        <p class="gt_footnote">
          <sup class="gt_footnote_marks">
            <em>1</em>
          </sup>
           
          CI = Confidence Interval
          <br />
        </p>
      </td>
    </tr>
  </tfoot>
</table></div>
]

---
count: false
 

.panel1-mod1-auto[

```r
tbl_regression(m1,
  label = list(bill_length_mm ~ 'Bill length (mm)',
               bill_depth_mm ~ 'Bill depth (mm)',
               flipper_length_mm ~ 'Flipper length (mm)')) %&gt;%
  add_global_p() %&gt;%
  bold_p(t = 0.05) %&gt;%
* bold_labels()
```
]
 
.panel2-mod1-auto[
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#wxkqizxtzk .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: small;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#wxkqizxtzk .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#wxkqizxtzk .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#wxkqizxtzk .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#wxkqizxtzk .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wxkqizxtzk .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#wxkqizxtzk .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#wxkqizxtzk .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#wxkqizxtzk .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#wxkqizxtzk .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#wxkqizxtzk .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#wxkqizxtzk .gt_group_heading {
  padding: 1px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#wxkqizxtzk .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#wxkqizxtzk .gt_from_md > :first-child {
  margin-top: 0;
}

#wxkqizxtzk .gt_from_md > :last-child {
  margin-bottom: 0;
}

#wxkqizxtzk .gt_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#wxkqizxtzk .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#wxkqizxtzk .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
}

#wxkqizxtzk .gt_first_summary_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#wxkqizxtzk .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
}

#wxkqizxtzk .gt_first_grand_summary_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#wxkqizxtzk .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#wxkqizxtzk .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wxkqizxtzk .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#wxkqizxtzk .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 1px;
}

#wxkqizxtzk .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#wxkqizxtzk .gt_sourcenote {
  font-size: 90%;
  padding: 1px;
}

#wxkqizxtzk .gt_left {
  text-align: left;
}

#wxkqizxtzk .gt_center {
  text-align: center;
}

#wxkqizxtzk .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#wxkqizxtzk .gt_font_normal {
  font-weight: normal;
}

#wxkqizxtzk .gt_font_bold {
  font-weight: bold;
}

#wxkqizxtzk .gt_font_italic {
  font-style: italic;
}

#wxkqizxtzk .gt_super {
  font-size: 65%;
}

#wxkqizxtzk .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="wxkqizxtzk" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Beta</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>95% CI</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>p-value</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_left" style="font-weight: bold;">species</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center" style="font-weight: bold;"><0.001</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Adelie</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Chinstrap</td>
      <td class="gt_row gt_center">-283</td>
      <td class="gt_row gt_center">-457, -108</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Gentoo</td>
      <td class="gt_row gt_center">891</td>
      <td class="gt_row gt_center">607, 1,175</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="font-weight: bold;">island</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center">0.6</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Biscoe</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Dream</td>
      <td class="gt_row gt_center">-21</td>
      <td class="gt_row gt_center">-136, 94</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Torgersen</td>
      <td class="gt_row gt_center">-59</td>
      <td class="gt_row gt_center">-178, 61</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="font-weight: bold;">Bill length (mm)</td>
      <td class="gt_row gt_center">19</td>
      <td class="gt_row gt_center">5.0, 33</td>
      <td class="gt_row gt_center" style="font-weight: bold;">0.008</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="font-weight: bold;">Bill depth (mm)</td>
      <td class="gt_row gt_center">61</td>
      <td class="gt_row gt_center">21, 100</td>
      <td class="gt_row gt_center" style="font-weight: bold;">0.003</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="font-weight: bold;">Flipper length (mm)</td>
      <td class="gt_row gt_center">19</td>
      <td class="gt_row gt_center">12, 25</td>
      <td class="gt_row gt_center" style="font-weight: bold;"><0.001</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="font-weight: bold;">sex</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center" style="font-weight: bold;"><0.001</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">female</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">male</td>
      <td class="gt_row gt_center">379</td>
      <td class="gt_row gt_center">284, 474</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="font-weight: bold;">year</td>
      <td class="gt_row gt_center">-43</td>
      <td class="gt_row gt_center">-84, -1.6</td>
      <td class="gt_row gt_center" style="font-weight: bold;">0.042</td>
    </tr>
  </tbody>
  
  <tfoot>
    <tr class="gt_footnotes">
      <td colspan="4">
        <p class="gt_footnote">
          <sup class="gt_footnote_marks">
            <em>1</em>
          </sup>
           
          CI = Confidence Interval
          <br />
        </p>
      </td>
    </tr>
  </tfoot>
</table></div>
]

---
count: false
 

.panel1-mod1-auto[

```r
tbl_regression(m1,
  label = list(bill_length_mm ~ 'Bill length (mm)',
               bill_depth_mm ~ 'Bill depth (mm)',
               flipper_length_mm ~ 'Flipper length (mm)')) %&gt;%
  add_global_p() %&gt;%
  bold_p(t = 0.05) %&gt;%
  bold_labels() %&gt;%
* italicize_levels()
```
]
 
.panel2-mod1-auto[
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#jbwdiygcsu .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: small;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#jbwdiygcsu .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#jbwdiygcsu .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#jbwdiygcsu .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#jbwdiygcsu .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#jbwdiygcsu .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#jbwdiygcsu .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#jbwdiygcsu .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#jbwdiygcsu .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#jbwdiygcsu .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#jbwdiygcsu .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#jbwdiygcsu .gt_group_heading {
  padding: 1px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#jbwdiygcsu .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#jbwdiygcsu .gt_from_md > :first-child {
  margin-top: 0;
}

#jbwdiygcsu .gt_from_md > :last-child {
  margin-bottom: 0;
}

#jbwdiygcsu .gt_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#jbwdiygcsu .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#jbwdiygcsu .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
}

#jbwdiygcsu .gt_first_summary_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#jbwdiygcsu .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
}

#jbwdiygcsu .gt_first_grand_summary_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#jbwdiygcsu .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#jbwdiygcsu .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#jbwdiygcsu .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#jbwdiygcsu .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 1px;
}

#jbwdiygcsu .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#jbwdiygcsu .gt_sourcenote {
  font-size: 90%;
  padding: 1px;
}

#jbwdiygcsu .gt_left {
  text-align: left;
}

#jbwdiygcsu .gt_center {
  text-align: center;
}

#jbwdiygcsu .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#jbwdiygcsu .gt_font_normal {
  font-weight: normal;
}

#jbwdiygcsu .gt_font_bold {
  font-weight: bold;
}

#jbwdiygcsu .gt_font_italic {
  font-style: italic;
}

#jbwdiygcsu .gt_super {
  font-size: 65%;
}

#jbwdiygcsu .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="jbwdiygcsu" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Beta</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>95% CI</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>p-value</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_left" style="font-weight: bold;">species</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center" style="font-weight: bold;"><0.001</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px; font-style: italic;">Adelie</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px; font-style: italic;">Chinstrap</td>
      <td class="gt_row gt_center">-283</td>
      <td class="gt_row gt_center">-457, -108</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px; font-style: italic;">Gentoo</td>
      <td class="gt_row gt_center">891</td>
      <td class="gt_row gt_center">607, 1,175</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="font-weight: bold;">island</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center">0.6</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px; font-style: italic;">Biscoe</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px; font-style: italic;">Dream</td>
      <td class="gt_row gt_center">-21</td>
      <td class="gt_row gt_center">-136, 94</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px; font-style: italic;">Torgersen</td>
      <td class="gt_row gt_center">-59</td>
      <td class="gt_row gt_center">-178, 61</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="font-weight: bold;">Bill length (mm)</td>
      <td class="gt_row gt_center">19</td>
      <td class="gt_row gt_center">5.0, 33</td>
      <td class="gt_row gt_center" style="font-weight: bold;">0.008</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="font-weight: bold;">Bill depth (mm)</td>
      <td class="gt_row gt_center">61</td>
      <td class="gt_row gt_center">21, 100</td>
      <td class="gt_row gt_center" style="font-weight: bold;">0.003</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="font-weight: bold;">Flipper length (mm)</td>
      <td class="gt_row gt_center">19</td>
      <td class="gt_row gt_center">12, 25</td>
      <td class="gt_row gt_center" style="font-weight: bold;"><0.001</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="font-weight: bold;">sex</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center" style="font-weight: bold;"><0.001</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px; font-style: italic;">female</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px; font-style: italic;">male</td>
      <td class="gt_row gt_center">379</td>
      <td class="gt_row gt_center">284, 474</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="font-weight: bold;">year</td>
      <td class="gt_row gt_center">-43</td>
      <td class="gt_row gt_center">-84, -1.6</td>
      <td class="gt_row gt_center" style="font-weight: bold;">0.042</td>
    </tr>
  </tbody>
  
  <tfoot>
    <tr class="gt_footnotes">
      <td colspan="4">
        <p class="gt_footnote">
          <sup class="gt_footnote_marks">
            <em>1</em>
          </sup>
           
          CI = Confidence Interval
          <br />
        </p>
      </td>
    </tr>
  </tfoot>
</table></div>
]

&lt;style&gt;
.panel1-mod1-auto {
  color: black;
  width: 38.6060606060606%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-mod1-auto {
  color: black;
  width: 59.3939393939394%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-mod1-auto {
  color: black;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;



---


.pull-left[

```r
penguins1 &lt;- penguins %&gt;% 
* mutate(species=fct_relevel(species,'Gentoo'))
m2 &lt;- lm(body_mass_g ~ ., data=penguins1)
tbl_regression(m2,
  label = list(bill_length_mm ~ 'Bill length (mm)',
               bill_depth_mm ~ 'Bill depth (mm)',
               flipper_length_mm ~ 'Flipper length (mm)')) %&gt;% 
  add_global_p() %&gt;% 
  bold_p(t = 0.05) %&gt;% 
  bold_labels() %&gt;% 
  italicize_levels()
```

### Changing reference level for a factor predictor
]
.pull-right[
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#qbwhbntglw .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: small;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#qbwhbntglw .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qbwhbntglw .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#qbwhbntglw .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#qbwhbntglw .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qbwhbntglw .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qbwhbntglw .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#qbwhbntglw .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#qbwhbntglw .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#qbwhbntglw .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#qbwhbntglw .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#qbwhbntglw .gt_group_heading {
  padding: 1px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#qbwhbntglw .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#qbwhbntglw .gt_from_md > :first-child {
  margin-top: 0;
}

#qbwhbntglw .gt_from_md > :last-child {
  margin-bottom: 0;
}

#qbwhbntglw .gt_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#qbwhbntglw .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#qbwhbntglw .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
}

#qbwhbntglw .gt_first_summary_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#qbwhbntglw .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
}

#qbwhbntglw .gt_first_grand_summary_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#qbwhbntglw .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#qbwhbntglw .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qbwhbntglw .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qbwhbntglw .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 1px;
}

#qbwhbntglw .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qbwhbntglw .gt_sourcenote {
  font-size: 90%;
  padding: 1px;
}

#qbwhbntglw .gt_left {
  text-align: left;
}

#qbwhbntglw .gt_center {
  text-align: center;
}

#qbwhbntglw .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#qbwhbntglw .gt_font_normal {
  font-weight: normal;
}

#qbwhbntglw .gt_font_bold {
  font-weight: bold;
}

#qbwhbntglw .gt_font_italic {
  font-style: italic;
}

#qbwhbntglw .gt_super {
  font-size: 65%;
}

#qbwhbntglw .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="qbwhbntglw" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Beta</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>95% CI</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>p-value</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_left" style="font-weight: bold;">species</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center" style="font-weight: bold;"><0.001</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px; font-style: italic;">Gentoo</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px; font-style: italic;">Adelie</td>
      <td class="gt_row gt_center">-891</td>
      <td class="gt_row gt_center">-1,175, -607</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px; font-style: italic;">Chinstrap</td>
      <td class="gt_row gt_center">-1,173</td>
      <td class="gt_row gt_center">-1,437, -910</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="font-weight: bold;">island</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center">0.6</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px; font-style: italic;">Biscoe</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px; font-style: italic;">Dream</td>
      <td class="gt_row gt_center">-21</td>
      <td class="gt_row gt_center">-136, 94</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px; font-style: italic;">Torgersen</td>
      <td class="gt_row gt_center">-59</td>
      <td class="gt_row gt_center">-178, 61</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="font-weight: bold;">Bill length (mm)</td>
      <td class="gt_row gt_center">19</td>
      <td class="gt_row gt_center">5.0, 33</td>
      <td class="gt_row gt_center" style="font-weight: bold;">0.008</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="font-weight: bold;">Bill depth (mm)</td>
      <td class="gt_row gt_center">61</td>
      <td class="gt_row gt_center">21, 100</td>
      <td class="gt_row gt_center" style="font-weight: bold;">0.003</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="font-weight: bold;">Flipper length (mm)</td>
      <td class="gt_row gt_center">19</td>
      <td class="gt_row gt_center">12, 25</td>
      <td class="gt_row gt_center" style="font-weight: bold;"><0.001</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="font-weight: bold;">sex</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center" style="font-weight: bold;"><0.001</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px; font-style: italic;">female</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px; font-style: italic;">male</td>
      <td class="gt_row gt_center">379</td>
      <td class="gt_row gt_center">284, 474</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="font-weight: bold;">year</td>
      <td class="gt_row gt_center">-43</td>
      <td class="gt_row gt_center">-84, -1.6</td>
      <td class="gt_row gt_center" style="font-weight: bold;">0.042</td>
    </tr>
  </tbody>
  
  <tfoot>
    <tr class="gt_footnotes">
      <td colspan="4">
        <p class="gt_footnote">
          <sup class="gt_footnote_marks">
            <em>1</em>
          </sup>
           
          CI = Confidence Interval
          <br />
        </p>
      </td>
    </tr>
  </tfoot>
</table></div>

]

---

### Putting together multiple models

.pull-left[

```r
(gt_r1 &lt;- glm(response ~ trt + grade, trial, 
              family = binomial) %&gt;%
  tbl_regression(exponentiate = TRUE))
```



]
.pull-right[
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#hlvjytgxxi .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: small;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#hlvjytgxxi .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#hlvjytgxxi .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#hlvjytgxxi .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#hlvjytgxxi .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hlvjytgxxi .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#hlvjytgxxi .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#hlvjytgxxi .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#hlvjytgxxi .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#hlvjytgxxi .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#hlvjytgxxi .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#hlvjytgxxi .gt_group_heading {
  padding: 1px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#hlvjytgxxi .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#hlvjytgxxi .gt_from_md > :first-child {
  margin-top: 0;
}

#hlvjytgxxi .gt_from_md > :last-child {
  margin-bottom: 0;
}

#hlvjytgxxi .gt_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#hlvjytgxxi .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#hlvjytgxxi .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
}

#hlvjytgxxi .gt_first_summary_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#hlvjytgxxi .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
}

#hlvjytgxxi .gt_first_grand_summary_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#hlvjytgxxi .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#hlvjytgxxi .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#hlvjytgxxi .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#hlvjytgxxi .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 1px;
}

#hlvjytgxxi .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#hlvjytgxxi .gt_sourcenote {
  font-size: 90%;
  padding: 1px;
}

#hlvjytgxxi .gt_left {
  text-align: left;
}

#hlvjytgxxi .gt_center {
  text-align: center;
}

#hlvjytgxxi .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#hlvjytgxxi .gt_font_normal {
  font-weight: normal;
}

#hlvjytgxxi .gt_font_bold {
  font-weight: bold;
}

#hlvjytgxxi .gt_font_italic {
  font-style: italic;
}

#hlvjytgxxi .gt_super {
  font-size: 65%;
}

#hlvjytgxxi .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="hlvjytgxxi" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>OR</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>95% CI</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>p-value</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_left">Chemotherapy Treatment</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Drug A</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Drug B</td>
      <td class="gt_row gt_center">1.21</td>
      <td class="gt_row gt_center">0.66, 2.24</td>
      <td class="gt_row gt_center">0.5</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">Grade</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">I</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">II</td>
      <td class="gt_row gt_center">0.94</td>
      <td class="gt_row gt_center">0.44, 1.98</td>
      <td class="gt_row gt_center">0.9</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">III</td>
      <td class="gt_row gt_center">1.09</td>
      <td class="gt_row gt_center">0.52, 2.27</td>
      <td class="gt_row gt_center">0.8</td>
    </tr>
  </tbody>
  
  <tfoot>
    <tr class="gt_footnotes">
      <td colspan="4">
        <p class="gt_footnote">
          <sup class="gt_footnote_marks">
            <em>1</em>
          </sup>
           
          OR = Odds Ratio, CI = Confidence Interval
          <br />
        </p>
      </td>
    </tr>
  </tfoot>
</table></div>
]

---

### Putting together multiple models

.pull-left[

```r
(gt_r2 &lt;- coxph(Surv(ttdeath, death) ~ trt + grade,
                trial) %&gt;%
  tbl_regression(exponentiate = TRUE))
```

]
.pull-right[
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#flxvbmgcdx .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: small;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#flxvbmgcdx .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#flxvbmgcdx .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#flxvbmgcdx .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#flxvbmgcdx .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#flxvbmgcdx .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#flxvbmgcdx .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#flxvbmgcdx .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#flxvbmgcdx .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#flxvbmgcdx .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#flxvbmgcdx .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#flxvbmgcdx .gt_group_heading {
  padding: 1px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#flxvbmgcdx .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#flxvbmgcdx .gt_from_md > :first-child {
  margin-top: 0;
}

#flxvbmgcdx .gt_from_md > :last-child {
  margin-bottom: 0;
}

#flxvbmgcdx .gt_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#flxvbmgcdx .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#flxvbmgcdx .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
}

#flxvbmgcdx .gt_first_summary_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#flxvbmgcdx .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
}

#flxvbmgcdx .gt_first_grand_summary_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#flxvbmgcdx .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#flxvbmgcdx .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#flxvbmgcdx .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#flxvbmgcdx .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 1px;
}

#flxvbmgcdx .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#flxvbmgcdx .gt_sourcenote {
  font-size: 90%;
  padding: 1px;
}

#flxvbmgcdx .gt_left {
  text-align: left;
}

#flxvbmgcdx .gt_center {
  text-align: center;
}

#flxvbmgcdx .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#flxvbmgcdx .gt_font_normal {
  font-weight: normal;
}

#flxvbmgcdx .gt_font_bold {
  font-weight: bold;
}

#flxvbmgcdx .gt_font_italic {
  font-style: italic;
}

#flxvbmgcdx .gt_super {
  font-size: 65%;
}

#flxvbmgcdx .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="flxvbmgcdx" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>HR</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>95% CI</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>p-value</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_left">Chemotherapy Treatment</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Drug A</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Drug B</td>
      <td class="gt_row gt_center">1.25</td>
      <td class="gt_row gt_center">0.86, 1.81</td>
      <td class="gt_row gt_center">0.2</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">Grade</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">I</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">II</td>
      <td class="gt_row gt_center">1.28</td>
      <td class="gt_row gt_center">0.80, 2.06</td>
      <td class="gt_row gt_center">0.3</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">III</td>
      <td class="gt_row gt_center">1.69</td>
      <td class="gt_row gt_center">1.07, 2.66</td>
      <td class="gt_row gt_center">0.024</td>
    </tr>
  </tbody>
  
  <tfoot>
    <tr class="gt_footnotes">
      <td colspan="4">
        <p class="gt_footnote">
          <sup class="gt_footnote_marks">
            <em>1</em>
          </sup>
           
          HR = Hazard Ratio, CI = Confidence Interval
          <br />
        </p>
      </td>
    </tr>
  </tfoot>
</table></div>

]

---

### Putting together multiple models

.pull-left[

```r
(gt_t1 &lt;- trial[c("trt", "grade")] %&gt;% 
  tbl_summary(missing = "no") %&gt;% 
  add_n() %&gt;%
  modify_header(stat_0 ~ "**n (%)**") %&gt;%
  modify_footnote(stat_0 ~ NA_character_))
```

]
.pull-right[
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#psnmqyofbn .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: small;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#psnmqyofbn .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#psnmqyofbn .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#psnmqyofbn .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#psnmqyofbn .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#psnmqyofbn .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#psnmqyofbn .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#psnmqyofbn .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#psnmqyofbn .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#psnmqyofbn .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#psnmqyofbn .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#psnmqyofbn .gt_group_heading {
  padding: 1px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#psnmqyofbn .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#psnmqyofbn .gt_from_md > :first-child {
  margin-top: 0;
}

#psnmqyofbn .gt_from_md > :last-child {
  margin-bottom: 0;
}

#psnmqyofbn .gt_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#psnmqyofbn .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#psnmqyofbn .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
}

#psnmqyofbn .gt_first_summary_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#psnmqyofbn .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
}

#psnmqyofbn .gt_first_grand_summary_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#psnmqyofbn .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#psnmqyofbn .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#psnmqyofbn .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#psnmqyofbn .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 1px;
}

#psnmqyofbn .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#psnmqyofbn .gt_sourcenote {
  font-size: 90%;
  padding: 1px;
}

#psnmqyofbn .gt_left {
  text-align: left;
}

#psnmqyofbn .gt_center {
  text-align: center;
}

#psnmqyofbn .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#psnmqyofbn .gt_font_normal {
  font-weight: normal;
}

#psnmqyofbn .gt_font_bold {
  font-weight: bold;
}

#psnmqyofbn .gt_font_italic {
  font-style: italic;
}

#psnmqyofbn .gt_super {
  font-size: 65%;
}

#psnmqyofbn .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="psnmqyofbn" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>N</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>n (%)</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_left">Chemotherapy Treatment</td>
      <td class="gt_row gt_center">200</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Drug A</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center">98 (49%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Drug B</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center">102 (51%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">Grade</td>
      <td class="gt_row gt_center">200</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">I</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center">68 (34%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">II</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center">68 (34%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">III</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center">64 (32%)</td>
    </tr>
  </tbody>
  
  
</table></div>

]

---

### Putting together multiple models


```r
tbl_merge(
  list(gt_t1, gt_r1, gt_r2),
  tab_spanner = c(NA_character_, "**Tumor Response**", "**Time to Death**")
)
```

<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#ehbiiloopz .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: small;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ehbiiloopz .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ehbiiloopz .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ehbiiloopz .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ehbiiloopz .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ehbiiloopz .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ehbiiloopz .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ehbiiloopz .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ehbiiloopz .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ehbiiloopz .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ehbiiloopz .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ehbiiloopz .gt_group_heading {
  padding: 1px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#ehbiiloopz .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ehbiiloopz .gt_from_md > :first-child {
  margin-top: 0;
}

#ehbiiloopz .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ehbiiloopz .gt_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ehbiiloopz .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#ehbiiloopz .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
}

#ehbiiloopz .gt_first_summary_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#ehbiiloopz .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
}

#ehbiiloopz .gt_first_grand_summary_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ehbiiloopz .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ehbiiloopz .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ehbiiloopz .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ehbiiloopz .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 1px;
}

#ehbiiloopz .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ehbiiloopz .gt_sourcenote {
  font-size: 90%;
  padding: 1px;
}

#ehbiiloopz .gt_left {
  text-align: left;
}

#ehbiiloopz .gt_center {
  text-align: center;
}

#ehbiiloopz .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ehbiiloopz .gt_font_normal {
  font-weight: normal;
}

#ehbiiloopz .gt_font_bold {
  font-weight: bold;
}

#ehbiiloopz .gt_font_italic {
  font-style: italic;
}

#ehbiiloopz .gt_super {
  font-size: 65%;
}

#ehbiiloopz .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="ehbiiloopz" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_center gt_columns_bottom_border" rowspan="2" colspan="1"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_center gt_columns_bottom_border" rowspan="2" colspan="1"><strong>N</strong></th>
      <th class="gt_col_heading gt_center gt_columns_bottom_border" rowspan="2" colspan="1"><strong>n (%)</strong></th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="3">
        <span class="gt_column_spanner"><strong>Tumor Response</strong></span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="3">
        <span class="gt_column_spanner"><strong>Time to Death</strong></span>
      </th>
    </tr>
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>OR</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>95% CI</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>p-value</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>HR</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>95% CI</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>p-value</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_left">Chemotherapy Treatment</td>
      <td class="gt_row gt_center">200</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Drug A</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center">98 (49%)</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Drug B</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center">102 (51%)</td>
      <td class="gt_row gt_center">1.21</td>
      <td class="gt_row gt_center">0.66, 2.24</td>
      <td class="gt_row gt_center">0.5</td>
      <td class="gt_row gt_center">1.25</td>
      <td class="gt_row gt_center">0.86, 1.81</td>
      <td class="gt_row gt_center">0.2</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">Grade</td>
      <td class="gt_row gt_center">200</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">I</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center">68 (34%)</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center">&mdash;</td>
      <td class="gt_row gt_center"></td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">II</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center">68 (34%)</td>
      <td class="gt_row gt_center">0.94</td>
      <td class="gt_row gt_center">0.44, 1.98</td>
      <td class="gt_row gt_center">0.9</td>
      <td class="gt_row gt_center">1.28</td>
      <td class="gt_row gt_center">0.80, 2.06</td>
      <td class="gt_row gt_center">0.3</td>
    </tr>
    <tr>
      <td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">III</td>
      <td class="gt_row gt_center"></td>
      <td class="gt_row gt_center">64 (32%)</td>
      <td class="gt_row gt_center">1.09</td>
      <td class="gt_row gt_center">0.52, 2.27</td>
      <td class="gt_row gt_center">0.8</td>
      <td class="gt_row gt_center">1.69</td>
      <td class="gt_row gt_center">1.07, 2.66</td>
      <td class="gt_row gt_center">0.024</td>
    </tr>
  </tbody>
  
  <tfoot>
    <tr class="gt_footnotes">
      <td colspan="9">
        <p class="gt_footnote">
          <sup class="gt_footnote_marks">
            <em>1</em>
          </sup>
           
          OR = Odds Ratio, CI = Confidence Interval, HR = Hazard Ratio
          <br />
        </p>
      </td>
    </tr>
  </tfoot>
</table></div>




---
class: middle, center, inverse

# A bit of computational inference

---

## Computational inference

- Using the computer and simulation to simulate null distributions or sampling distributions of statistics
    - _sampling distribution_ is the distribution of values we'd see for a statistics if we repeated the experiment over and over
    - _null distribution_ is the distribution of values we'd expect to see if the null hypothesis we're using happens to be true. 
    
![](img/infer.png)
    
---

## Simulation

R has several standard distributions programmed in, from which random numbers can be drawn and distributions visualized

---

## Simulation

.pull-left[

The Gaussian or normal distribution

```r
x &lt;- rnorm(10000) # 10,000 random numbers from standard normal distribution
hist(x) # This is the base R way to create a histogram
```
]
.pull-right[
![](00_modeling_files/figure-html/09-Modeling-1-1.png)&lt;!-- --&gt;
]

---

## Simulation

.pull-left[

```r
# Toss a fair coin 10 times, count number of heads
# Repeat 10,000 times
x &lt;- rbinom(10000, size = 10, prob = 0.5)
hist(x)
```
]
.pull-right[
![](00_modeling_files/figure-html/09-Modeling-2-1.png)&lt;!-- --&gt;
]

---

## Simulation

.pull-left[

```r
# 10,000 random dumbers from a chi-square distribution
# with 1 d.f.

x &lt;- rchisq(10000, 1)
hist(x)
```
]
.pull-right[
![](00_modeling_files/figure-html/09-Modeling-3-1.png)&lt;!-- --&gt;
]

---

## Simulations

Simulations on a computer aren't exactly random, but *pseudo-random*. They form a _complex, deterministic_ series of numbers which have some properties.

You can set the starting point of the series. It's called the **seed**.

---


```r
*set.seed(28954)

dd &lt;- data.frame(x = rnorm(100))

dd$y &lt;- rnorm(100)

plt1 &lt;- ggplot(dd, aes(x))+geom_histogram()
plt2 &lt;- ggplot(dd, aes( y)) + geom_histogram()

cowplot::plot_grid(plt1, plt2, nrow=1)
```
![](00_modeling_files/figure-html/09-Modeling-4-1.png)&lt;!-- --&gt;

---


```r
*set.seed(28954)

dd &lt;- data.frame(x = rnorm(100))
*set.seed(28954)
dd$y &lt;- rnorm(100)

plt1 &lt;- ggplot(dd, aes(x))+geom_histogram()
plt2 &lt;- ggplot(dd, aes( y)) + geom_histogram()

cowplot::plot_grid(plt1, plt2, nrow=1)
```
![](00_modeling_files/figure-html/09-Modeling-5-1.png)&lt;!-- --&gt;

---
class: middle, center

## Always set a seed to ensure replicability of simulation experiments

---

## Permutation tests

We will use the R package `infer` for this section, as well as the `pbc` data. We'll first do a permutation test to see if bilirubin is significantly different by treatment group.

A classical thing to do would be a `t.test` or a `wilcox.test`. 


```r
library(survival)

t.test(bili~trt, data=pbc)
```

```

	Welch Two Sample t-test

data:  bili by trt
t = -1.5074, df = 270.39, p-value = 0.1329
alternative hypothesis: true difference in means is not equal to 0
95 percent confidence interval:
 -1.7878314  0.2372643
sample estimates:
mean in group 1 mean in group 2 
       2.873418        3.648701 
```

---

## Permutation tests

In a permution test, we assume the null hypothesis of no difference between the groups, which means 

- if we shuffled the group memberships (re-assigned individuals to different treatments) nothing should change. 

If we compute the test statistic over different permutations, we'll get the distribution of test statistic values we'd see if the null hypothesis was true. 

---

## Permutation tests

.pull-left[

```r
library(infer)

set.seed(10193)
sims &lt;- pbc %&gt;% 
  mutate(trt = as.factor(trt)) %&gt;% 
  specify(bili ~ trt) %&gt;% 
  hypothesize(null = 'independence') %&gt;% 
  generate(reps = 1000, type = 'permute') %&gt;% 
  calculate(stat = 'diff in means', order = c('1','2'))

visualize(sims)
```


```r
library(infer)
(obs_stat &lt;- pbc %&gt;% mutate(trt=as.factor(trt)) %&gt;% 
  specify(bili ~ trt) %&gt;% 
  calculate(stat='diff in means',order = c('1','2')))
```

```
# A tibble: 1 x 1
    stat
   &lt;dbl&gt;
1 -0.775
```

]
.pull-right[
![](00_modeling_files/figure-html/09-Modeling-8-1.png)&lt;!-- --&gt;

]


---

## Permutation tests

.pull-left[

```r
library(infer)

set.seed(10193)
sims &lt;- pbc %&gt;% 
  mutate(trt = as.factor(trt)) %&gt;% 
  specify(bili ~ trt) %&gt;% # trt must be a factor
  hypothesize(null = 'independence') %&gt;% 
  generate(reps = 1000, type = 'permute') %&gt;% 
  calculate(stat = 'diff in means', order = c('1','2'))

visualize(sims) + shade_p_value(obs_stat, direction = 'both')
```


```r
sims %&gt;% get_pvalue(obs_stat, direction ='both')
```

```
# A tibble: 1 x 1
  p_value
    &lt;dbl&gt;
1   0.158
```

]
.pull-right[
![](00_modeling_files/figure-html/09-Modeling-10-1.png)&lt;!-- --&gt;

]
---

## Bootstrapping for confidence intervals

Suppose we want to get a confidence interval for the mean bilirubin level overall. 

The bootstrap samples the original data **with replacement** to get a dataset of the same size.

Since sampling is with replacement, some observations are repeated, some are omitted.

Strong theory from the 80s and 90s says that if we repeatedly take bootstrap samples of our data and compute the sample means, their distribution will be very close to the true sampling distribution of the sample mean. 

---

## Bootstrapping for confidence intervals

.pull-left[

```r
x &lt;- pbc %&gt;% 
  specify(response = bili) %&gt;% 
* generate(reps = 1000, type = 'bootstrap') %&gt;%
  calculate('mean')
```





```r
(ci &lt;- x %&gt;% get_confidence_interval())
```

```
# A tibble: 1 x 2
  lower_ci upper_ci
     &lt;dbl&gt;    &lt;dbl&gt;
1     2.84     3.66
```
]
.pull-right[
![](00_modeling_files/figure-html/09-Modeling-13-1.png)&lt;!-- --&gt;

]

---

## Resources

1. Several [infer](https://infer.netlify.com/articles/two_sample_t.html) [examples](https://infer.netlify.com/articles/flights_examples.html)
1. The [R Companion](https://rcompanion.org/handbook/K_01.html) chapter on permutation tests
1. [This site](https://mac-theobio.github.io/QMEE/permutation_examples.html) gives alternative methods for doing permutation tests in R
1. The [coin](http://coin.r-forge.r-project.org/) package provides a richer set of permutation tests, but `infer` covers what you need most often.




---
class: middle,center,inverse

# A short intro to Machine Learning in R

---

## Packages

&lt;table class="table" style="margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; Title &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Mode &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Function/Package &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Linear regression &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; regression &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; lm,glmnet &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Logistic regression &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; regression/classification &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; glm,glmnet &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; K-nearest neighbors &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; regression/classification &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; kknn &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Poisson regression &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; regression &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; glm, glmnet,hurdle &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Decision trees &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; regression/classification &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; rpart,C5.0,party,partykit &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Random forests &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; regression/classification &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; randomForest,ranger,randomForestSRC &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Boosted trees &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; regression &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; gbm,xgboost &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Neural networks &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; regression &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; nnet,keras,torch &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Survival models &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; regression &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; survival,flexsurv &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

## Some examples

Most of the ML packages accept the same formula interface as `lm` and `glm`.


```r
library(randomForest)
library(gbm)
penguins_complete &lt;- penguins %&gt;% filter(complete.cases(.))

# Most modeling functions do not allow missing values

ml1 &lt;- randomForest(body_mass_g ~ ., data = penguins_complete)
ml2 &lt;- gbm(body_mass_g ~ ., data=penguins_complete, distribution = 'gaussian')
ml3 &lt;- lm(body_mass_g ~ ., data=penguins_complete)

mods &lt;- list('random_forest'=ml1, 
             'boosted_trees' = ml2, 
             'linear_regression' = ml3)
```

Compute the predictions of body mass based on each of the models


```r
preds &lt;- map(mods, predict, newdata=penguins_complete) %&gt;% 
  bind_cols()
preds &lt;- cbind(orig = penguins_complete$body_mass_g, preds)
```


---

## Some examples


```r
pairs(preds)
```

![](00_modeling_files/figure-html/unnamed-chunk-43-1.png)&lt;!-- --&gt;

---

## Some examples


```r
GGally::ggpairs(preds)
```

![](00_modeling_files/figure-html/unnamed-chunk-44-1.png)&lt;!-- --&gt;

---

## Some examples

We can also assess fit based on metrics. We'll use the root mean squared error (RMSE) here.


```r
library(yardstick)

map(preds[,-1], ~yardstick::rmse_vec(preds[,1],.))
```

```
$random_forest
[1] 179.1461

$boosted_trees
[1] 280.5861

$linear_regression
[1] 282.1891
```


However, these are optimistic since we're estimating errors from the same data that was
used to fit the model.

We'll look at a unified way to approach this problem next.





---
class: middle,center,inverse

# A general modeling framework: tidymodels

---

## Tidymodels

**tidymodels** is a meta-package, much like **tidyverse** but bundling a set of 
philosophically similar packages for model-building. 

&lt;table class="table" style="margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; Package &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Description &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; dials &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Tools for Creating Tuning Parameter Values &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; infer &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Tidy Statistical Inference &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; modeldata &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Data Sets Used Useful for Modeling Packages &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; parsnip &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; A Common API to Modeling and Analysis Functions &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; recipes &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Preprocessing Tools to Create Design Matrices &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; rsample &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; General Resampling Infrastructure &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; tune &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Tidy Tuning Tools &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; workflows &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Modeling Workflows &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; yardstick &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Tidy Characterizations of Model Performance &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

## Split data between a training and a test set


```r
library(tidymodels)

set.seed(3849) # to seed the random number generator

# Split data into training and test sets
data_split &lt;- initial_split(penguins_complete,
                            prop = 0.75, 
                            strata = 'species')

dat_train &lt;- training(data_split)
dat_test &lt;- testing(data_split)
```

---

## Fit models on the training set


```r
ml11 &lt;- randomForest(body_mass_g ~ ., data=dat_train)
ml21 &lt;- gbm(body_mass_g ~ ., data = dat_train, distribution = 'gaussian')
ml31 &lt;- lm(body_mass_g ~ ., data=dat_train)

mods1 &lt;- list('random_forest' = ml11,
              'boosted_trees' = ml21,
              'linear_regression' = ml31)
preds1 &lt;- map(mods1, predict, newdata = dat_test)

rmse &lt;- map_dbl(preds1,
                ~yardstick::rmse_vec(dat_test$body_mass_g,
                                     .))
rmse
```

```
    random_forest     boosted_trees linear_regression 
         317.3619          332.8922          317.5940 
```

So, on the test set, the linear regression model and the random forest model perform similarly, with the boosted model doing worse.

---

## Unification through the parsnip package


```r
library(tidymodels)

mods2 &lt;- list(
'random_forest'= rand_forest() %&gt;% 
  set_engine('randomForest') %&gt;% 
  set_mode('regression'),
'boosted_tree' = boost_tree(mode='regression') %&gt;% 
  set_engine('xgboost', objective='reg:squarederror'),
'linear_regression' =  linear_reg() %&gt;% 
  set_engine('lm')
)

preds &lt;- mods2 %&gt;% 
  map(function(m) m %&gt;% fit(body_mass_g ~ ., data=dat_train) %&gt;% 
        predict(new_data = dat_test)) %&gt;% 
  bind_cols() %&gt;% 
  set_names(names(mods2))
map_dbl(preds, ~yardstick::rmse_vec(dat_test$body_mass_g,.))
```

```
    random_forest      boosted_tree linear_regression 
         315.6370          327.1615          317.5940 
```

---
class: middle,center,inverse

# A machine learning workflow

---

## Using the nycflights13 data

We'll use the nycflights13 data, which provides information about all domestic US 
flights departing one of the three metropolitan New York City airports in 2013. 
In this example we will model whether flights arrive late at their destination


```r
library(nycflights13)
glimpse(flights)
```

```
Rows: 336,776
Columns: 19
$ year           [3m[90m&lt;int&gt;[39m[23m 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2013,
$ month          [3m[90m&lt;int&gt;[39m[23m 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
$ day            [3m[90m&lt;int&gt;[39m[23m 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
$ dep_time       [3m[90m&lt;int&gt;[39m[23m 517, 533, 542, 544, 554, 554, 555, 557, 557, 55
$ sched_dep_time [3m[90m&lt;int&gt;[39m[23m 515, 529, 540, 545, 600, 558, 600, 600, 600, 60
$ dep_delay      [3m[90m&lt;dbl&gt;[39m[23m 2, 4, 2, -1, -6, -4, -5, -3, -3, -2, -2, -2, -2
$ arr_time       [3m[90m&lt;int&gt;[39m[23m 830, 850, 923, 1004, 812, 740, 913, 709, 838, 7
$ sched_arr_time [3m[90m&lt;int&gt;[39m[23m 819, 830, 850, 1022, 837, 728, 854, 723, 846, 7
$ arr_delay      [3m[90m&lt;dbl&gt;[39m[23m 11, 20, 33, -18, -25, 12, 19, -14, -8, 8, -2, -
$ carrier        [3m[90m&lt;chr&gt;[39m[23m "UA", "UA", "AA", "B6", "DL", "UA", "B6", "EV",
$ flight         [3m[90m&lt;int&gt;[39m[23m 1545, 1714, 1141, 725, 461, 1696, 507, 5708, 79
$ tailnum        [3m[90m&lt;chr&gt;[39m[23m "N14228", "N24211", "N619AA", "N804JB", "N668DN
$ origin         [3m[90m&lt;chr&gt;[39m[23m "EWR", "LGA", "JFK", "JFK", "LGA", "EWR", "EWR"
$ dest           [3m[90m&lt;chr&gt;[39m[23m "IAH", "IAH", "MIA", "BQN", "ATL", "ORD", "FLL"
$ air_time       [3m[90m&lt;dbl&gt;[39m[23m 227, 227, 160, 183, 116, 150, 158, 53, 140, 138
$ distance       [3m[90m&lt;dbl&gt;[39m[23m 1400, 1416, 1089, 1576, 762, 719, 1065, 229, 94
$ hour           [3m[90m&lt;dbl&gt;[39m[23m 5, 5, 5, 5, 6, 5, 6, 6, 6, 6, 6, 6, 6, 6, 6, 5,
$ minute         [3m[90m&lt;dbl&gt;[39m[23m 15, 29, 40, 45, 0, 58, 0, 0, 0, 0, 0, 0, 0, 0, 
$ time_hour      [3m[90m&lt;dttm&gt;[39m[23m 2013-01-01 05:00:00, 2013-01-01 05:00:00, 2013
```

---

## Data munging


```r
set.seed(2949)

flight_data &lt;- 
  flights %&gt;% 
  mutate(arr_delay = ifelse(arr_delay &gt;= 30, 'late','on_time'),
         arr_delay = factor(arr_delay),
         date = as.Date(time_hour)) %&gt;% 
  inner_join(weather, by = c('origin','time_hour')) %&gt;% 
  select(dep_time, flight, origin, dest, air_time, distance, 
         carrier, date, arr_delay, time_hour) %&gt;% 
  na.omit() %&gt;% 
  mutate(across(where(is.character), as.factor))
```

.pull-left[

```r
flight_data %&gt;% 
  count(arr_delay) %&gt;% 
  mutate(prop = n/sum(n))
```

```
# A tibble: 2 x 3
  arr_delay      n  prop
* &lt;fct&gt;      &lt;int&gt; &lt;dbl&gt;
1 late       52540 0.161
2 on_time   273279 0.839
```
]
.pull-right[

```r
janitor::tabyl(flight_data, arr_delay)
```

```
 arr_delay      n   percent
      late  52540 0.1612552
   on_time 273279 0.8387448
```

]

---

## Split the data


```r
set.seed(555)

data_split &lt;- initial_split(flight_data, prop = 3/4)

train_data &lt;- training(data_split)
test_data &lt;- testing(data_split)
```

---

## Preprocess the data


```r
flights_rec &lt;- 
  recipe(arr_delay ~ ., data=train_data) %&gt;% 
  update_role(flight, time_hour, new_role = "ID") %&gt;% 
  step_date(date, features = c("dow", "month")) %&gt;%               
  step_holiday(date, holidays = timeDate::listHolidays("US")) %&gt;% 
  step_rm(date) %&gt;% 
  step_dummy(all_nominal(), -all_outcomes()) %&gt;% 
  step_zv(all_predictors())
flights_rec
```

```
Data Recipe

Inputs:

      role #variables
        ID          2
   outcome          1
 predictor          7

Operations:

Date features from date
Holiday features from date
Delete terms date
Dummy variables from all_nominal(), -all_outcomes()
Zero variance filter on all_predictors()
```


---

## Define a model


```r
lr_mod &lt;- logistic_reg() %&gt;% 
  set_engine('glm')
lr_mod
```

```
Logistic Regression Model Specification (classification)

Computational engine: glm 
```

---

## Create a workflow


```r
flights_wflow &lt;- 
  workflow() %&gt;% 
  add_model(lr_mod) %&gt;% 
  add_recipe(flights_rec)

flights_wflow
```

```
 Workflow 
Preprocessor: Recipe
Model: logistic_reg()

 Preprocessor 
5 Recipe Steps

 step_date()
 step_holiday()
 step_rm()
 step_dummy()
 step_zv()

 Model 
Logistic Regression Model Specification (classification)

Computational engine: glm 
```

---

## Fit model to the data


```r
flights_fit &lt;- 
  flights_wflow %&gt;% 
  fit(data = train_data)
```

--

## Predict on the test data


```r
flights_pred &lt;- 
  flights_fit %&gt;% 
  predict(test_data, type='prob') %&gt;% 
  bind_cols(test_data %&gt;% select(arr_delay, time_hour, flight))
head(flights_pred)
```

```
# A tibble: 6 x 5
  .pred_late .pred_on_time arr_delay time_hour           flight
       &lt;dbl&gt;         &lt;dbl&gt; &lt;fct&gt;     &lt;dttm&gt;               &lt;int&gt;
1     0.0565         0.944 on_time   2013-01-01 05:00:00   1714
2     0.0264         0.974 on_time   2013-01-01 06:00:00     79
3     0.0481         0.952 on_time   2013-01-01 06:00:00    301
4     0.0325         0.967 on_time   2013-01-01 06:00:00     49
5     0.0711         0.929 on_time   2013-01-01 06:00:00   1187
6     0.0583         0.942 on_time   2013-01-01 06:00:00   4401
```

---

## Evaluate the model fit

.pull-left[

```r
flights_pred %&gt;% 
  roc_curve(truth=arr_delay, .pred_late) %&gt;% 
  autoplot()
```

The area under the ROC curve is 0.7647741. 
]
.pull-right[
![](00_modeling_files/figure-html/unnamed-chunk-60-1.png)&lt;!-- --&gt;
]

---

# Resources

This workflow is not basic, so I'll point you to some resources.

1. [Getting started with tidymodels](https://www.tidymodels.org/start/)
1. [Feature Engineering and Selection](https://bookdown.org/max/FES/) by Kuhn and Johnson
1. [Learn more about tidymodels](https://www.tidymodels.org/learn/)
1. [The caret package](https://topepo.github.io/caret/index.html)


    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="../js/macros.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightLanguage": "r",
"highlightStyle": "tomorrow-night-bright",
"highlightLines": true,
"countIncrementalSlides": false,
"slideNumberFormat": "%current%"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
